<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>首页</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="../../../css/bootstrap.min.css">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="../../../js/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="../../../js/bootstrap.min.js"></script>

    <!-- 大前端：html、css、js、jquery、bootstrap
        layer是一个弹出层插件，是layui里面的一个分支，layui跟bootstrap一样
        bootstrap是外国人研发的，layui是中国人研发，只用了layer的一个loading功能，正在加载...
         jquery.ajaxupload是网上一位不知名网友写的插件，基于jquery写出来的
         专门用于前端上传图片、文件、视频等
     -->
    <script src="../../../js/jquery.ajaxupload.js"></script>
    <link rel="stylesheet" href="../../../layer/theme/default/layer.css"/>
    <script src="../../../layer/layer.js"></script>


    <script type="text/javascript">
        $(function() {// jquery主函数
            $.ajaxUploadSettings.name = "file";//上传的是文件：txt、图片、视频、word、ppt...
            var loading = null;//定义一个变量
            $('#upload-image').ajaxUploadPrompt({//找到id="upload-image"这个按钮，绑定“打开选择文件”事件
                url: '/product/logo',//图片上传的地址！非常重要！
                beforeSend: function () {
                    loading = layer.load(1);//正在加载...转圈圈
                },
                success: function (data) {//上传成功了
                    if (loading) {
                        layer.close(loading);//取消转圈
                    }
                    //alert(data);//观察一下输出了什么
                    $('#image').attr('src', data);//会发生图片破碎
                    $('#upload').val(data);//非常关键！设置输入框值
                },
                error: function () {
                    if (loading) {
                        layer.close(loading);
                    }
                    alert('上传失败');
                }
            });
        });
    </script>


</head>

<body>
<div style="padding:0px; margin:0px;">
    <ul class="breadcrumb" style="  margin:0px; " >
        <li><a href="#">商品管理</a></li>
        <li>当前商品</li>
    </ul>
</div>

<form action="/product/add" method="post" class="form-horizontal">
    <input type="hidden" name="id" value="${(bean.id)!}"/>
    <input type="hidden" name="cid" value="${cid}"/><!-- 非常重要！ -->
    <h5 class="page-header alert-info" style="padding:10px; margin:0px; margin-bottom:5px;">基本信息</h5>
    <div class="row">
        <div class="col-sm-5">
            <div class="form-group">
                <label class="col-sm-3 control-label">商品名称</label>
                <div class="col-sm-9">
                    <input type="text" name="product" value="${(bean.product)!}" class="form-control input-sm"/>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-5">
            <div class="form-group">
                <label class="col-sm-3 control-label">单价</label>
                <div class="col-sm-9">
                    <input type="number" name="price" value="${(bean.price)!}" class="form-control input-sm"/>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-5">
            <div class="form-group">
                <label class="col-sm-3 control-label">剩余数量</label>
                <div class="col-sm-9">
                    <input type="number" name="num" value="${(bean.num)!}" class="form-control input-sm"/>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-5">
            <div class="form-group">
                <label class="col-sm-3 control-label">logo</label>
                <div class="col-sm-9">
                    <input id="upload" type="hidden" name="logo" value="${(bean.logo)!}" class="form-control input-sm"/>
                    <input id="upload-image" type="button" class="btn btn-success" value="上传图片"/>
                    <br/>
                    <img id="image" src="${(bean.logo)!}" />
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-5">
            <div class="form-group">
                <label class="col-sm-3 control-label">热卖</label>
                <div class="col-sm-9">
                    <select name="hot" class="form-control input-sm">
                        <option value="1">热卖</option>
                        <option value="0">非热卖</option>
                    </select>
                </div>
            </div>
        </div>
    </div>




    <div class="row">
        <div class="col-sm-3 col-sm-offset-4">
            <input  type="submit" class="btn btn-success" value="保存"/>
            <a class="btn btn-warning" href="javascript:window.history.back()">返回上一级</a>
        </div>
    </div>
</form>

</body>
</html>
